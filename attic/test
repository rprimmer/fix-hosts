# ... Previous code ...

eval set -- "$parsed"

# Process parsed options using the `while` loop (as in your original code)
# ...

# Now, positional arguments are ready to be accessed
if [[ $# -lt 1 && $ADD_DNS != "TRUE" && $DNS_FLUSH != "TRUE" ]]; then
    echo "No argument provided"
    usage
fi

# Access the first positional argument (e.g., "prep" or "restore")
ACTION="$1"  # Use $1 to get the first positional argument
shift      # Move to the next argument for subsequent processing

# ... Rest of the code ...
